<!DOCTYPE HTML>
<html>
	<head>
		<meta charset = "utf-8">
		<title>Astromangoes Blog</title>
		<link rel="stylesheet" href="pageStyle.css">
		<link rel="stylesheet" href="projectListStyle.css">
	</head>
	<body>
	<div class="header">
		<h1>Project Log</h1>
	</div>
	<div class="navbar">
		<a href="">Home</a>
		<a href="">Project List</a>
		<a href="">About</a>
	</div>
	<div class="mid-pane">
		<div class="left-margin"></div>
		<div class="content-pane" id="proj">

		</div>
		<div class="right-margin"></div>
		<script>
			function formatProjectName(project) {
				let output = "<h1>"+project.name+"</h1>";
				return output;
			}
			function formatProjectDate(project) {
				let output = "<span>"+project.day+"/"+project.month+"/"+project.year+"</span>";
				return output;
			}
			function formatProjectSummary(project) {
				let output = "<p>"+project.summary+"</p>";
				return output;
			}function formatProjectImg(project) {
				let output = "<img src="+project.img+">";
				return output;
			}
			function formatProject(project) {
				let output = "<div class='project-list'>" + 
							"<div class='project-list-left'>" +
							"<div class='project-list-left-top'>" +
							"<div class='project-list-name'>" +
							formatProjectName(project) +
							"</div>" +
							"<div class='project-list-date'>" +
							formatProjectDate(project) +
							"</div>" +
							"</div>" +
							"<div class='project-list-left-bottom'>" +
							"<div class='project-list-summary'>" +
							formatProjectSummary(project) +
							"</div>" +
							"</div>" +
							"</div>" +
							"<div class='project-list-right'>" +
							"<div class='project-list-img'>" +
							formatProjectImg(project) +
							"</div>" +
							"</div>" +
							"</div>";
				return output;
			}
			function drawProjects(projArray) {
				let output = "";
				for(let i = 0; i < projArray.length; i++) {
					let currProj = projArray[i];
					output += formatProject(currProj);
				}
				document.getElementById("proj").innerHTML = output;
			}
			function loadJSONDoc(filename) {
  				var xhttp = new XMLHttpRequest();
  				xhttp.onreadystatechange = function() {
    				if (this.readyState == 4 && this.status == 200) {
    					console.log(JSON.parse(this.responseText));
						let projects = JSON.parse(this.responseText);
						drawProjects(projects);
					}
  				};
  					xhttp.open("GET", filename, true);
  					xhttp.send();
			}
			loadJSONDoc("projects.json");
		</script>
	</div>
	<div class="footer">
		<a href="test_page/page.html">test page here</a>
	</div>
	</body>
</html>
